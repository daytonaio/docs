class a extends HTMLElement{constructor(){super(),this.setupModal(),this.updateImage(document.documentElement.dataset.theme),new MutationObserver(e=>{e.forEach(c=>{if(c.attributeName==="data-theme"){const t=document.documentElement.dataset.theme;this.updateImage(t)}})}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}setupModal(){const s=this.querySelector("picture:not(.modal-picture)"),e=this.querySelector("dialog"),c=e?.querySelector(".close-button");s&&e&&(s.addEventListener("click",()=>{e.showModal()}),c?.addEventListener("click",()=>{e.close()}),e.addEventListener("click",t=>{t.target===e&&e.close()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&e.open&&e.close()}))}updateImage(s){const e=this.querySelectorAll("source"),c=this.querySelectorAll("img");e.forEach(t=>{const o=s==="dark"?t.dataset.darkSrc:t.dataset.lightSrc;o&&(t.srcset=o)}),c.forEach(t=>{const o=t.previousElementSibling;o&&(t.src=o.srcset)})}}customElements.define("theme-aware-image",a);
