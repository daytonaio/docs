---
import { SideNavLinks } from './menu/SideNavLinks'
import daytonaLogo from '@assets/icons/daytona-logo.svg?raw'
import daytonaLogoIcon from '@assets/icons/logo-icon.svg?raw'
import documentationIcon from '@assets/icons/documentation-icon.svg?raw'
import searchIcon from '@assets/icons/search.svg?raw'
import Version from '@components/Version.astro'
import Search from '@components/Search'
---

<header class="navbar">
  <nav class="desktop-only">
    <div class="logo-divider">
      <a
        href="https://www.daytona.io/"
        aria-label="Daytona"
        class="daytona-logo"
      >
        <Fragment set:html={daytonaLogo} />
      </a>
    </div>
    <div class="logo-divider">
      <a href={import.meta.env.BASE_URL} class="dotfiles-logo"
        ><Fragment set:html={documentationIcon} />Documentation
      </a>
    </div>
    <a href={import.meta.env.BASE_URL} class="dotfiles-logo">v<Version /> </a>
    <div class="nav__items_side_menu">
      <p id="search-icon">
        <Fragment set:html={searchIcon} />
      </p>
      <SideNavLinks client:load />
    </div>
  </nav>
  <nav class="mobile-navigation">
    <div class="logo-divider blur-section">
      <a
        href="https://www.daytona.io/"
        aria-label="Daytona"
        class="daytona-logo blur-section"
      >
        <Fragment set:html={daytonaLogoIcon} />
      </a>
    </div>
    <a href={import.meta.env.BASE_URL} class="dotfiles-logo blur-section"
      ><Fragment set:html={documentationIcon} />Documentation
    </a>
    <p id="search-icon-mobile" class="search-icon">
      <Fragment set:html={searchIcon} />
    </p>
  </nav>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const searchIcon = document.getElementById('search-icon')
    const searchIconMobile = document.getElementById('search-icon-mobile')

    if (searchIcon) {
      searchIcon.addEventListener('click', () => {
        window.dispatchEvent(new CustomEvent('toggleSearch'))
      })
    }

    if (searchIconMobile) {
      searchIconMobile.addEventListener('click', () => {
        window.dispatchEvent(new CustomEvent('toggleSearch'))
      })
    }
  })
</script>

<Search client:load />

<style>
  .mobile-navigation {
    @media (max-width: 650px) {
      padding: 20px 0 !important;
    }
  }

  #search-icon {
    background: -var(--bg-color);
    padding-top: 6px;
    margin-right: 8px;
    cursor: pointer;
  }

  #search-icon-mobile {
    position: absolute;
    margin-right: 32px;
    top: 40px;
    right: 16px;
    transform: translateY(-50%);
    cursor: pointer;
    z-index: 10;
  }
</style>
