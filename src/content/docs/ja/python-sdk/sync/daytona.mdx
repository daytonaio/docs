---
title: "Daytona"
hideTitleOnPage: true
---

## Daytona

```python
class Daytona()
```

Daytona API と対話するためのメインクラスです。

このクラスは、Daytona Sandbox の作成、管理、操作のためのメソッドを提供します。
明示的な設定または環境変数を使用して初期化できます。

**属性**:

- `volume` _VolumeService_ - ボリュームを管理するサービス。
- `snapshot` _SnapshotService_ - スナップショットを管理するサービス。
  
**例**:

  環境変数を使用する場合:

```python
daytona = Daytona()  # DAYTONA_API_KEY, DAYTONA_API_URL を使用
sandbox = daytona.create()
```
  
  明示的な設定を使用する場合:

```python
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona = Daytona(config)
sandbox = daytona.create()
```

#### Daytona.\_\_init\_\_

```python
def __init__(config: Optional[DaytonaConfig] = None)
```

オプションの設定で Daytona インスタンスを初期化します。

config が指定されていない場合、環境変数から読み込みます:

- `DAYTONA_API_KEY`: 認証用の必須 API キー
- `DAYTONA_API_URL`: 必須の API URL
- `DAYTONA_TARGET`: オプションのターゲット環境（デフォルトは 'us'）

**引数**:

- `config` _Optional[DaytonaConfig]_ - api_key、api_url、target を含むオブジェクト。
  
**例外**:

- `DaytonaError` - config または環境変数のいずれからも API キーが提供されていない場合
  
**例**:

```python
from daytona import Daytona, DaytonaConfig
# 環境変数を使用
daytona1 = Daytona()

# 明示的な設定を使用
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona2 = Daytona(config)

```

#### Daytona.create

```python
@overload
def create(params: Optional[CreateSandboxFromSnapshotParams] = None,
           *,
           timeout: Optional[float] = 60) -> Sandbox
```

指定された、またはデフォルトのスナップショットから Sandbox を作成します。言語、イメージ、環境変数、ボリュームなど、さまざまなパラメータを指定できます。

**引数**:

- `params` _Optional[CreateSandboxFromSnapshotParams]_ - Sandbox 作成用のパラメータ。指定しない場合は、デフォルトの Daytona スナップショットと Python 言語が使用されます。
- `timeout` _Optional[float]_ - Sandbox 作成のタイムアウト（秒単位）。0 はタイムアウトなし。デフォルトは 60 秒。
  
**戻り値**:

- `Sandbox` - 作成された Sandbox インスタンス。
  
**例外**:

- `DaytonaError` - timeout、auto_stop_interval、auto_archive_interval のいずれかが負の場合；
  または Sandbox の起動に失敗した場合やタイムアウトした場合
  
**例**:

  デフォルトの Python Sandbox を作成:

```python
sandbox = daytona.create()
```
  
  カスタム Sandbox を作成:

```python
params = CreateSandboxFromSnapshotParams(
    language="python",
    snapshot="my-snapshot-id",
    env_vars={"DEBUG": "true"},
    auto_stop_interval=0,
    auto_archive_interval=60
)
sandbox = daytona.create(params, timeout=40)
```

#### Daytona.create

```python
@overload
def create(params: Optional[CreateSandboxFromImageParams] = None,
           *,
           timeout: Optional[float] = 60,
           on_snapshot_create_logs: Callable[[str], None] = None) -> Sandbox
```

レジストリ上にあるイメージや宣言的な Daytona Image から Sandbox を作成します。リソース、言語、イメージ、環境変数、ボリュームなど、さまざまなパラメータを指定できます。Daytona は指定されたイメージからスナップショットを作成し、それを使って Sandbox を作成します。

**引数**:

- `params` _Optional[CreateSandboxFromImageParams]_ - イメージから Sandbox を作成するためのパラメータ。
- `timeout` _Optional[float]_ - Sandbox 作成のタイムアウト（秒単位）。0 はタイムアウトなし。デフォルトは 60 秒。
- `on_snapshot_create_logs` _Callable[[str], None]_ - スナップショット作成ログを処理するコールバック関数。
  
**戻り値**:

- `Sandbox` - 作成された Sandbox インスタンス。
  
**例外**:

- `DaytonaError` - timeout、auto_stop_interval、auto_archive_interval のいずれかが負の場合；
  または Sandbox の起動に失敗した場合やタイムアウトした場合
  
**例**:

  イメージからデフォルトの Python Sandbox を作成:

```python
sandbox = daytona.create(CreateSandboxFromImageParams(image="debian:12.9"))
```
  
  宣言的な Image 定義からカスタム Sandbox を作成:

```python
declarative_image = (
    Image.base("alpine:3.18")
    .pipInstall(["numpy", "pandas"])
    .env({"MY_ENV_VAR": "My Environment Variable"})
)
params = CreateSandboxFromImageParams(
    language="python",
    image=declarative_image,
    env_vars={"DEBUG": "true"},
    resources=Resources(cpu=2, memory=4),
    auto_stop_interval=0,
    auto_archive_interval=60,
)
sandbox = daytona.create(
    params,
    timeout=40,
    on_snapshot_create_logs=lambda chunk: print(chunk, end=""),
)
```

#### Daytona.delete

```python
@intercept_errors(message_prefix="Failed to remove sandbox: ")
def delete(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを削除します。

**引数**:

- `sandbox` _Sandbox_ - 削除するサンドボックスインスタンス。
- `timeout` _Optional[float]_ - サンドボックス削除のタイムアウト（秒単位）。0はタイムアウトなしを意味します。
  デフォルトは60秒です。
  
**例外**:

- `DaytonaError` - サンドボックスの削除に失敗した場合、またはタイムアウトした場合
  
**例**:

```python
sandbox = daytona.create()
# ... use sandbox ...
daytona.delete(sandbox)  # 終了時にクリーンアップ
```

#### Daytona.get

```python
@intercept_errors(message_prefix="Failed to get sandbox: ")
def get(sandbox_id: str) -> Sandbox
```

IDでサンドボックスを取得します。

**引数**:

- `sandbox_id` _str_ - 取得するサンドボックスのID。
  
**戻り値**:

- `Sandbox` - サンドボックスインスタンス。
  
**例外**:

- `DaytonaError` - sandbox_idが指定されていない場合。
  
**例**:

```python
sandbox = daytona.get("my-sandbox-id")
print(sandbox.status)
```

#### Daytona.find\_one

```python
@intercept_errors(message_prefix="Failed to find sandbox: ")
def find_one(sandbox_id: Optional[str] = None,
             labels: Optional[Dict[str, str]] = None) -> Sandbox
```

IDまたはラベルでサンドボックスを検索します。

**引数**:

- `sandbox_id` _Optional[str]_ - 取得するサンドボックスのID。
- `labels` _Optional[Dict[str, str]]_ - サンドボックスをフィルタリングするためのラベル。
  
**戻り値**:

- `Sandbox` - IDまたはラベルに一致する最初のサンドボックス。
  
**例外**:

- `DaytonaError` - サンドボックスが見つからなかった場合。
  
**例**:

```python
sandbox = daytona.find_one(labels={"my-label": "my-value"})
print(f"Sandbox ID: {sandbox.id} State: {sandbox.state}")
```

#### Daytona.list

```python
@intercept_errors(message_prefix="Failed to list sandboxes: ")
def list(labels: Optional[Dict[str, str]] = None) -> List[Sandbox]
```

ラベルでフィルタリングされたサンドボックスの一覧を取得します。

**引数**:

- `labels` _Optional[Dict[str, str]]_ - サンドボックスをフィルタリングするためのラベル。
  
**戻り値**:

- `List[Sandbox]` - ラベルに一致するサンドボックスインスタンスのリスト。
  
**例**:

```python
sandboxes = daytona.list(labels={"my-label": "my-value"})
for sandbox in sandboxes:
    print(f"{sandbox.id}: {sandbox.status}")
```

#### Daytona.start

```python
def start(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを起動し、準備ができるまで待機します。

**引数**:

- `sandbox` _Sandbox_ - 起動するサンドボックス。
- `timeout` _Optional[float]_ - サンドボックスの起動を待つためのオプションのタイムアウト（秒単位）。
  0はタイムアウトなしを意味します。デフォルトは60秒です。
  
**例外**:

- `DaytonaError` - タイムアウトが負の値の場合、またはサンドボックスの起動に失敗した場合やタイムアウトした場合

#### Daytona.stop

```python
def stop(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを停止し、停止するまで待機します。

**引数**:

- `sandbox` _Sandbox_ - 停止するサンドボックス
- `timeout` _Optional[float]_ - サンドボックス停止のためのオプションのタイムアウト（秒単位）。
  0はタイムアウトなしを意味します。デフォルトは60秒です。
  
**例外**:

- `DaytonaError` - タイムアウトが負の値の場合、またはサンドボックスの停止に失敗した場合やタイムアウトした場合

## CodeLanguage

```python
@dataclass
class CodeLanguage(Enum)
```

Daytona がサポートするプログラミング言語

**列挙メンバー**:
    - `PYTHON` ("python")
    - `TYPESCRIPT` ("typescript")
    - `JAVASCRIPT` ("javascript")

## DaytonaConfig

```python
class DaytonaConfig(BaseModel)
```

Daytonaクライアントを初期化するための設定オプション。

**属性**:

- `api_key` _Optional[str]_ - Daytona APIで認証するためのAPIキー。設定されていない場合は、環境変数`DAYTONA_API_KEY`で指定するか、代わりにJWTトークンを指定する必要があります。
- `jwt_token` _Optional[str]_ - Daytona APIで認証するためのJWTトークン。設定されていない場合は、環境変数`DAYTONA_JWT_TOKEN`で指定するか、代わりにAPIキーを指定する必要があります。
- `organization_id` _Optional[str]_ - JWTベース認証で使用される組織ID。JWTトークンが指定されている場合は必須であり、ここで指定するか、環境変数`DAYTONA_ORGANIZATION_ID`で設定する必要があります。
- `api_url` _Optional[str]_ - Daytona APIのURL。ここで、または環境変数`DAYTONA_API_URL`で設定されていない場合、デフォルトは`'https://app.daytona.io/api'`です。
- `server_url` _Optional[str]_ - 非推奨。代わりに`api_url`を使用してください。このプロパティは将来のバージョンで削除されます。
- `target` _Optional[SandboxTargetRegion]_ - Sandboxのターゲット環境。ここで、または環境変数`DAYTONA_TARGET`で設定されていない場合、デフォルトは`'us'`です。
  
**例**:

```python
config = DaytonaConfig(api_key="your-api-key")
```

```python
config = DaytonaConfig(jwt_token="your-jwt-token", organization_id="your-organization-id")
```

## CreateSandboxBaseParams

```python
class CreateSandboxBaseParams(BaseModel)
```

新しいSandboxを作成するための基本パラメータ。

**属性**:

- `language` _Optional[CodeLanguage]_ - Sandboxで使用するプログラミング言語。デフォルトは"python"。
- `os_user` _Optional[str]_ - SandboxのOSユーザー。
- `env_vars` _Optional[Dict[str, str]]_ - Sandbox内で設定する環境変数。
- `labels` _Optional[Dict[str, str]]_ - Sandbox用のカスタムラベル。
- `public` _Optional[bool]_ - Sandboxを公開するかどうか。
- `timeout` _Optional[float]_ - Sandboxの作成および起動のタイムアウト（秒単位）。
- `auto_stop_interval` _Optional[int]_ - 指定した時間内にSandboxイベントが発生しなかった場合、自動的にSandboxを停止するまでの間隔（分単位）。デフォルトは15分。0の場合は自動停止しません。
- `auto_archive_interval` _Optional[int]_ - 継続的に停止しているSandboxが自動的にアーカイブされるまでの間隔（分単位）。デフォルトは7日間。0の場合は最大間隔が使用されます。

## CreateSandboxFromImageParams

```python
class CreateSandboxFromImageParams(CreateSandboxBaseParams)
```

イメージから新しいSandboxを作成するためのパラメータ。

**属性**:

- `image` _Union[str, Image]_ - Sandboxで使用するカスタムDockerイメージ。Imageオブジェクトが指定された場合は、
  イメージが動的にビルドされます。
- `resources` _Optional[Resources]_ - Sandboxのリソース構成。指定しない場合は、
  デフォルトのリソースが割り当てられます。

## CreateSandboxFromSnapshotParams

```python
class CreateSandboxFromSnapshotParams(CreateSandboxBaseParams)
```

スナップショットから新しいSandboxを作成するためのパラメーター。

**属性**:

- `snapshot` _Optional[str]_ - Sandboxで使用するスナップショットの名前。
