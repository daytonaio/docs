---
title: Sandbox Management
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

Sandboxは、Daytonaによって管理される分離された開発環境です。このガイドでは、SDKを使用してSandboxを作成、管理、削除する方法について説明します。
デフォルトでは、Sandboxは15分間の非アクティブ状態の後に自動停止し、**1 vCPU**、**1GB RAM**、**3GiB disk**を使用します。

## Sandboxの作成

Daytona SDKは、デフォルトまたはカスタム設定でSandboxを作成するオプションを提供します。Sandboxの言語、[Snapshot](/docs/snapshots)、リソース、環境変数、ボリュームを指定できます。
デフォルトでは、リソースを節約するため、Sandboxは非アクティブ状態が`15分`続くと自動停止しますが、タイムアウトは延長できます。

:::tip
自動停止間隔を延長したい場合は、Sandbox作成時に`auto_stop_interval`パラメータを使用できます。このパラメータは分単位で測定されます。

自動停止間隔パラメータを`0`に設定すると、自動停止機能が完全に無効になり、sandboxが無期限に実行されます。
:::

### 基本的なSandbox作成

Daytona SDKは、PythonとTypeScriptを使用して、デフォルト設定、特定の言語、またはカスタムラベルでSandboxを作成するメソッドを提供します。

<Tabs>
<TabItem label="Python" icon="seti:python">
```python
from daytona import Daytona, CreateSandboxFromSnapshotParams

daytona = Daytona()

# Create a basic Sandbox

sandbox = daytona.create()

# Create a Sandbox with specific language

params = CreateSandboxFromSnapshotParams(language="python")
sandbox = daytona.create(params)

# Create a Sandbox with custom labels

params = CreateSandboxFromSnapshotParams(labels={"SOME_LABEL": "my-label"})
sandbox = daytona.create(params)

```
</TabItem>

<TabItem label="TypeScript" icon="seti:typescript">
```typescript
import { Daytona } from '@daytonaio/sdk';

const daytona = new Daytona();

// Create a basic Sandbox
const sandbox = await daytona.create();

// Create a Sandbox with specific language
const sandbox = await daytona.create({ language: 'typescript' });

// Create a Sandbox with custom labels
const sandbox = await daytona.create({ labels: { SOME_LABEL: 'my-label' } });
```

</TabItem>
</Tabs>

:::note
Daytonaは、デフォルトのSnapshotを使用してウォームSandboxのプールを維持しています。  
利用可能な場合、Sandboxはコールドブートではなく、ミリ秒で起動します。
:::

### Sandboxリソース

Daytona Sandboxは、デフォルトで**1 vCPU**、**1GB RAM**、**3GiBディスク**を提供します。  

より多くのパワーが必要ですか？`Resources`クラスを使用して、必要なものを正確に定義してください：CPU、メモリ、ディスク容量はすべてカスタマイズ可能です。

利用可能なリソースと制限は[ダッシュボード](https://app.daytona.io/dashboard/limits)で確認してください。

<Tabs>
<TabItem label="Python" icon="seti:python">
```python
from daytona import Daytona, Resources, CreateSandboxFromImageParams, Image

daytona = Daytona()

# Create a Sandbox with custom resources

resources = Resources(
    cpu=2,  # 2 CPU cores
    memory=4,  # 4GB RAM
    disk=8,  # 8GB disk space
)

params = CreateSandboxFromImageParams(
    image=Image.debian_slim("3.12"),
    resources=resources
)

sandbox = daytona.create(params)

```
</TabItem>
<TabItem label="TypeScript" icon="seti:typescript">
```typescript
import { Daytona, Image } from "@daytonaio/sdk";

async function main() {
  const daytona = new Daytona();

  // Create a Sandbox with custom resources
  const sandbox = await daytona.create({
    image: Image.debianSlim("3.13"),
    resources: {
      cpu: 2, // 2 CPU cores
      memory: 4, // 4GB RAM
      disk: 8, // 8GB disk space
    },
  });
}

main();
```

</TabItem>
</Tabs>

:::note
すべてのリソースパラメータはオプションです。指定されていない場合、Daytonaは選択された言語とユースケースに適したデフォルト値を使用します。
:::

## Sandbox情報

Daytona SDKは、PythonとTypeScriptを使用してSandboxのID、ルートディレクトリ、ステータスなどの情報を取得するメソッドを提供します。

<Tabs>
<TabItem label="Python" icon="seti:python">
```python
# Get Sandbox ID
sandbox_id = sandbox.id

# Get the root directory of the Sandbox user

root_dir = sandbox.get_user_root_dir()

# Get the Sandbox id, auto-stop interval and state

print(sandbox.id)
print(sandbox.auto_stop_interval)
print(sandbox.state)

```

</TabItem>
<TabItem label="TypeScript" icon="seti:typescript">
```typescript
// Get Sandbox ID
const sandboxId = sandbox.id;

// Get the root directory of the Sandbox user
const rootDir = await sandbox.getUserRootDir();

// Get the Sandbox id, auto-stop interval and state
console.log(sandbox.id)
console.log(sandbox.autoStopInterval)
console.log(sandbox.state)
```

</TabItem>
</Tabs>

特定のポートのプレビューURLを取得するには、[Preview & Authentication](/docs/preview-and-authentication)をご確認ください。

## Sandboxの停止と削除

Daytona SDKは、PythonとTypeScriptを使用してSandboxを停止および削除するメソッドを提供します。

<Tabs>
<TabItem label="Python" icon="seti:python">
```python
# Stop Sandbox
sandbox.stop()

# Delete Sandbox

sandbox.delete()

```
</TabItem>
<TabItem label="TypeScript" icon="seti:typescript">
```typescript
// Stop Sandbox
await sandbox.stop();

// Delete Sandbox
await sandbox.delete();
```

</TabItem>
</Tabs>

:::tip
ターミナルを通じてSandboxを管理することを好む場合は、[Daytona CLI](/docs/getting-started#setting-up-the-daytona-cli)をチェックしてください：

```bash
daytona sandbox list
```

```text
                                                                                                                   
    Sandbox               State           Region        Last Event                  
    ────────────────────────────────────────────────────────────────────────────────────   
    ugliest_quokka        STARTED         us            1 hour ago                  
                                                                                                                     
    associated_yak        STARTED         us            14 hours ago                
                                                                                                                     
    developed_lemur       STARTED         us            17 hours ago                
                                                                                                                     
```

```bash
daytona sandbox start|stop|remove --all
```

```text
All sandboxes have been deleted
```

:::

## Sandboxの状態と永続化

Daytonaは、Sandboxのライフサイクル全体を通してファイルシステム全体を保持します。永続化機能はシステムに組み込まれており、ユーザー側で明示的に行う必要はありません。

### 自動停止間隔

コスト効率を維持するためには、Sandboxの状態を理解することが重要です。便利な組み込み機能の一つが自動停止間隔です。デフォルトでは、`15分間`の非アクティブ状態の後にSandboxを停止することでトリガーされますが、この数値は自動停止を無効にする`0`を含む任意の値に変更できます。

<Tabs>
<TabItem label="Python" icon="seti:python">
```python
sandbox = daytona.create(CreateSandboxFromSnapshotParams(
    snapshot="my-snapshot-name",
    auto_stop_interval=0,  # Disables the auto-stop feature - default is 15 minutes
))
```
</TabItem>
<TabItem label="TypeScript" icon="seti:typescript">
```typescript
const sandbox = await daytona.create({
    snapshot: "my-snapshot-name",
    autoStopInterval: 0, // Disables the auto-stop feature - default is 15 minutes
});
```

</TabItem>
</Tabs>

### 自動アーカイブ間隔

もう一つの便利な組み込み機能が自動アーカイブ間隔です。デフォルトでは、Sandboxが継続的に停止状態にある`7日間`の後にアーカイブすることでトリガーされますが、この数値は最大間隔の`30日間`が使用される`0`を含む任意の値に変更できます。

<Tabs>
<TabItem label="Python" icon="seti:python">
```python
sandbox = daytona.create(CreateSandboxFromSnapshotParams(
    snapshot="my-snapshot-name",
    auto_archive_interval=60 # Auto-archive after a Sandbox has been stopped for 1 hour
))
```
</TabItem>
<TabItem label="TypeScript" icon="seti:typescript">
```typescript
const sandbox = await daytona.create({
    snapshot: "my-snapshot-name",
    autoArchiveInterval: 60 // Auto-archive after a Sandbox has been stopped for 1 hour
});
```
</TabItem>
</Tabs>

Daytona Sandboxは、そのライフサイクル中に3つの状態を持つことができます：

### 実行中

実行中のSandboxはCPU、メモリ、ディスクストレージを利用します。すべてのリソースは使用時間の秒単位で課金されます。Sandboxが積極的に使用されていない場合は、停止することが推奨されます。これは以下の方法で行うことができます：

- stopコマンドを使用して手動で
- autoStop間隔を設定して自動的に

### 停止中

停止中のSandboxはディスクストレージのみを利用します。必要に応じて即座に開始できます。停止状態は、Sandboxが近いうちに再び開始されることが予想される場合に使用すべきです。そうでなければ、ディスク使用コストを削減するためにSandboxをアーカイブすることが推奨されます。

### アーカイブ済み

Sandboxがアーカイブされると、ファイルシステム状態全体が非常にコスト効率の良いオブジェクトストレージに移動され、Sandboxを長期間利用可能に保つことができます。

### パフォーマンスに関する考慮事項

アーカイブ状態と停止状態のトレードオフは、アーカイブされたSandboxの開始にはそのサイズに応じてより多くの時間がかかることです。
